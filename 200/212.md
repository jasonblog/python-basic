#重回函數

在本教程的開始部分，就已經引入了函數的概念：[《永遠強大的函數》](./106.md)，之所以那時候就提到函數，是因爲我覺得函數之重要，遠遠超過一般。這裏，重回函數，一是複習，二是要在已經學習的基礎上，對函數有更深刻的理解。

##函數的基本結構

Python中的函數基本結構：

    def 函數名([參數列表]):

        語句

幾點說明：

- 函數名的命名規則要符合python中的命名要求。一般用小寫字母和單下劃線、數字等組合
- def是函數的開始，這個簡寫來自英文單詞define，顯然，就是要定義一個什麼東西
- 函數名後面是圓括號，括號裏面，可以有參數列表，也可以沒有參數
- 千萬不要忘記了括號後面的冒號
- 語句，相對於def縮進，按照python習慣，縮進四個空格

看簡單例子，深入理解上面的要點：

    >>> def name():         #定義一個無參數的函數，只是通過這個函數打印
    ...     print "qiwsir"  #縮進4個空格
    ...
    >>> name()              #調用函數，打印結果
    qiwsir

    >>> def add(x,y):       #定義一個非常簡單的函數
    ...     return x+y      #縮進4個空格
    ...
    >>> add(2,3)            #通過函數，計算2+3
    5

注意上面的add(x,y)函數，在這個函數中，沒有特別規定參數x,y的類型。其實，這句話本身就是錯的，還記得在前面已經多次提到，在python中，變量無類型，只有對象纔有類型，這句話應該說成：x,y並沒有嚴格規定其所引用的對象類型。

爲什麼？列位不要忘記了，這裏的所謂參數，跟前面說的變量，本質上是一回事。python中不需要提前聲明變量，有的語言就需要聲明。只有當用到該變量的時候，才建立變量與對象的對應關係，否則，關係不建立。而對象纔有不同的類型。那麼，在add(x,y)函數中，x,y在引用對象之前，是完全自由的，也就是它們可以引用任何對象，只要後面的運算許可，如果後面的運算不許可，則會報錯。

    >>> add("qiw","sir")    #這裏，x="qiw",y="sir"，讓函數計算x+y,也就是"qiw"+"sir"
    'qiwsir'

    >>> add("qiwsir",4)
    Traceback (most recent call last):
      File "<stdin>", line 1, in <module>
      File "<stdin>", line 2, in add
    TypeError: cannot concatenate 'str' and 'int' objects  #仔細閱讀報錯信息，就明白錯誤之處了

從實驗結果中發現：x+y的意義完全取決於對象的類型。在python中，將這種依賴關係，稱之爲**多態**。這是python和其它的靜態語言的重要區別。在python中，代碼不關心特定的數據類型。

對於python中的多態問題，以後還會遇到，這裏僅僅以此例子顯示一番。請看官要留心注意的：**python中爲對象編寫接口，而不是爲數據類型。**

此外，也可以將函數通過賦值語句，與某個變量建立引用關係：

    >>> result = add(3,4)
    >>> result
    7

在這裏，其實解釋了函數的一個祕密。add(x,y)在被運行之前，計算機內是不存在的，直到代碼運行到這裏的時候，在計算機中，就建立起來了一個對象，這就如同前面所學習過的字符串、列表等類型的對象一樣，運行add(x,y)之後，也建立了一個add(x,y)的對象，這個對象與變量result可以建立引用關係，並且add(x,y)將運算結果返回。於是，通過result就可以查看運算結果。

如果看官上面一段，感覺有點吃力或者暈乎，也不要緊，那就再讀一邊。是在搞不明白，就不要搞了。隨着學習的深入，它會被明白的。

##調用函數

扯了不少函數怎麼編寫，到底編寫函數有什麼用？在程序中怎麼調用呢？

爲什麼要寫函數？從理論上說，不用函數，也能夠編程，我們在前面已經寫了一個猜數字的程序，在那麼就沒有寫函數，當然，用python的函數不算了。現在之所以使用函數，主要是：

1. 降低編程的難度，通常將一個複雜的大問題分解成一系列更簡單的小問題，然後將小問題繼續劃分成更小的問題，當問題細化爲足夠簡單時，就可以分而治之。爲了實現這種分而治之的設想，就要通過編寫函數，將各個小問題逐個擊破，再集合起來，解決大的問題。（看官請注意，分而治之的思想是編程的一個重要思想，所謂“分治”方法也。）
2. 代碼重(chong，二聲音)用。在編程的過程中，比較忌諱同樣一段代碼不斷的重複，所以，可以定義一個函數，在程序的多個位置使用，也可以用於多個程序。當然，後面我們還會講到“模塊”（此前也涉及到了，就是import導入的那個東西），還可以把函數放到一個模塊中供其他程序員使用。也可以使用其他程序員定義的函數（比如import ...,前面已經用到了，就是應用了別人——創造python的人——寫好的函數）。這就避免了重複勞動，提供了工作效率。

這樣看來，函數還是很必要的了。廢話少說，那就看函數怎麼調用吧。以add(x,y)爲例，前面已經演示了基本調用方式，此外，還可以這樣：

    >>> def add(x,y):       #爲了能夠更明瞭顯示參數賦值特點，重寫此函數
    ...     print "x=",x    #分別打印參數賦值結果
    ...     print "y=",y
    ...     return x+y
    ...
    >>> add(10,3)           #x=10,y=3
    x= 10
    y= 3
    13
    >>> add(x=10,y=3)       #同上
    x= 10
    y= 3
    13
    >>> add(y=10,x=3)       #x=3,y=10
    x= 3
    y= 10
    13
    >>> add(3,10)           #x=3,y=10
    x= 3
    y= 10
    13

在定義函數的時候，參數可以想前面那樣，等待被賦值，也可以定義的時候就賦給一個默認值。例如：

    >>> def times(x,y=2):       #y的默認值爲2
    ...     print "x=",x
    ...     print "y=",y
    ...     return x*y
    ...
    >>> times(3)                #x=3,y=2
    x= 3
    y= 2
    6

    >>> times(x=3)              #同上
    x= 3
    y= 2
    6

    >>> times(3,4)              #x=3,y=4,y的值不再是2
    x= 3
    y= 4
    12

    >>> times("qiwsir")         #再次體現了多態特點
    x= qiwsir
    y= 2
    'qiwsirqiwsir'

給列位看官提一個思考題，請在閒暇之餘用python完成：寫兩個數的加、減、乘、除的函數，然後用這些函數，完成簡單的計算。

##注意事項

下面的若干條，是常見編寫代碼的注意事項：

1. 別忘了冒號。一定要記住符合語句首行末尾輸入“：”（if,while,for等的第一行）
2. 從第一行開始。要確定頂層（無嵌套）程序代碼從第一行開始。
3. 空白行在交互模式提示符下很重要。模塊文件中符合語句內的空白行常被忽視。但是，當你在交互模式提示符下輸入代碼時，空白行則是會結束語句。
4. 縮進要一致。避免在塊縮進中混合製表符和空格。
5. 使用簡潔的for循環，而不是while or range.相比，for循環更易寫，運行起來也更快
6. 要注意賦值語句中的可變對象。
7. 不要期待在原處修改的函數會返回結果,比如list.append()
8. 一定要之用括號調用函數
9. 不要在導入和重載中使用擴展名或路徑。

